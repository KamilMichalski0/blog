---
import BaseLayout from '@/layouts/BaseLayout.astro';
import BlogCard from '@/components/BlogCard.astro';
import ChangelogItem from '@/components/ChangelogItem.astro';
import { getCollection } from 'astro:content';

const blogPosts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const changelogEntries = (await getCollection('changelog'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 2);
---

<BaseLayout title="ClaudeCodeLab - Naucz Się Programowania z AI">
  <!-- Hero Section with Soft Gradient -->
  <section class="relative overflow-hidden">
    <!-- Soft gradient background -->
    <div class="absolute inset-0 bg-gradient-to-br from-slate-50 via-gray-50 to-zinc-50 dark:from-slate-900 dark:via-gray-900 dark:to-zinc-900"></div>

    <!-- Content -->
    <div class="relative container-content py-24 md:py-32 lg:py-40 pb-48 md:pb-56 lg:pb-64">
      <div class="text-center max-w-5xl mx-auto fade-in">
        <div class="mb-6">
          <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-white/90 dark:bg-gray-800/90 text-[rgb(var(--color-accent))] shadow-lg backdrop-blur-sm">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
            </svg>
            Platforma Nauki Oparta na AI
          </span>
        </div>

        <h1 class="text-5xl md:text-7xl lg:text-8xl font-extrabold text-gray-900 dark:text-white mb-8 leading-tight">
          Opanuj Programowanie z
          <span class="block mt-2 gradient-text">
            Claude Code
          </span>
        </h1>

        <p class="text-xl md:text-2xl text-gray-700 dark:text-gray-300 mb-12 max-w-3xl mx-auto leading-relaxed font-medium">
          Odblokuj swój potencjał programistyczny dzięki tutorialom opartym na AI, nowoczesnym technikom programowania
          i praktycznym wskazówkom od Claude AI.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-20">
          <a href="/blog" class="btn-primary text-lg px-8 py-4 shadow-xl hover:shadow-indigo-500/30 group">
            Zacznij Naukę
            <svg class="w-5 h-5 ml-2 inline-block transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
          <a href="/changelog" class="text-lg px-8 py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors shadow-lg">
            Zobacz Aktualizacje
          </a>
        </div>

        <!-- Stats with proper spacing before wave -->
        <div class="grid grid-cols-3 gap-8 max-w-2xl mx-auto">
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">50+</div>
            <div class="text-sm md:text-base text-gray-600 dark:text-gray-400">Tutoriali</div>
          </div>
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">10K+</div>
            <div class="text-sm md:text-base text-gray-600 dark:text-gray-400">Programistów</div>
          </div>
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">100%</div>
            <div class="text-sm md:text-base text-gray-600 dark:text-gray-400">Za Darmo</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Wave divider -->
    <div class="absolute bottom-0 left-0 right-0">
      <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto">
        <path d="M0 0L60 10C120 20 240 40 360 46.7C480 53 600 47 720 43.3C840 40 960 40 1080 46.7C1200 53 1320 67 1380 73.3L1440 80V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0V0Z" fill="currentColor" class="text-gray-50 dark:text-gray-950"/>
      </svg>
    </div>
  </section>

  <!-- Features Section -->
  <section class="section bg-gray-50 dark:bg-gray-950">
    <div class="container-content">
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
          Dlaczego <span class="gradient-text">ClaudeCodeLab</span>?
        </h2>
        <p class="text-xl text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">
          Wszystko, czego potrzebujesz, aby przyspieszyć swoją naukę programowania
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Feature 1 -->
        <div class="group">
          <div class="card text-center p-8 h-full hover:scale-105">
            <div class="relative w-20 h-20 mx-auto mb-6">
              <div class="absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-2xl transform rotate-6 group-hover:rotate-12 transition-transform"></div>
              <div class="relative w-full h-full bg-gradient-to-br from-blue-500 to-indigo-700 rounded-2xl flex items-center justify-center">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                </svg>
              </div>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">Nauka Wspierana AI</h3>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
              Ucz się koncepcji programowania z pomocą Claude AI, który sprawia, że złożone tematy stają się intuicyjne i dostępne.
            </p>
          </div>
        </div>

        <!-- Feature 2 -->
        <div class="group">
          <div class="card text-center p-8 h-full hover:scale-105">
            <div class="relative w-20 h-20 mx-auto mb-6">
              <div class="absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl transform rotate-6 group-hover:rotate-12 transition-transform"></div>
              <div class="relative w-full h-full bg-gradient-to-br from-green-500 to-emerald-700 rounded-2xl flex items-center justify-center">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
              </div>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">Błyskawiczna Szybkość</h3>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
              Zbudowane z Astro dla optymalnej wydajności. Doświadcz natychmiastowego ładowania stron i płynnej nawigacji.
            </p>
          </div>
        </div>

        <!-- Feature 3 -->
        <div class="group">
          <div class="card text-center p-8 h-full hover:scale-105">
            <div class="relative w-20 h-20 mx-auto mb-6">
              <div class="absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-600 rounded-2xl transform rotate-6 group-hover:rotate-12 transition-transform"></div>
              <div class="relative w-full h-full bg-gradient-to-br from-purple-500 to-pink-700 rounded-2xl flex items-center justify-center">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                </svg>
              </div>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">Ciągły Rozwój</h3>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
              Regularne aktualizacje i nowe funkcje. Śledź każde ulepszenie w naszym szczegółowym changelog.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Blog Posts -->
  {blogPosts.length > 0 && (
    <section class="section bg-gray-50 dark:bg-gray-950">
      <div class="container-content">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4">
          <div>
            <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-2">
              Najnowsze <span class="gradient-text">Tutoriale</span>
            </h2>
            <p class="text-lg text-gray-700 dark:text-gray-300">
              Świeże treści, które podniosą Twoje umiejętności programistyczne
            </p>
          </div>
          <a href="/blog" class="group inline-flex items-center text-lg font-semibold text-[rgb(var(--color-accent))] hover:text-[rgb(var(--color-accent-dark))]">
            Zobacz wszystkie posty
            <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
        <div class="grid md:grid-cols-3 gap-8">
          {blogPosts.map((post, index) => (
            <div class="fade-in" style={`animation-delay: ${index * 100}ms`}>
              <BlogCard
                title={post.data.title}
                description={post.data.description}
                pubDate={post.data.pubDate}
                heroImage={post.data.heroImage}
                href={`/blog/${post.id}`}
                tags={post.data.tags}
                draft={post.data.draft}
              />
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Recent Changelog -->
  {changelogEntries.length > 0 && (
    <section class="section bg-gray-50 dark:bg-gray-900">
      <div class="container-content">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4">
          <div>
            <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-2">
              Ostatnie <span class="gradient-text">Aktualizacje</span>
            </h2>
            <p class="text-lg text-gray-700 dark:text-gray-300">
              Zobacz, co nowego i ulepszonego
            </p>
          </div>
          <a href="/changelog" class="group inline-flex items-center text-lg font-semibold text-[rgb(var(--color-accent))] hover:text-[rgb(var(--color-accent-dark))]">
            Pełny changelog
            <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
        <div class="space-y-6">
          {changelogEntries.map((entry, index) => (
            <div class="fade-in" style={`animation-delay: ${index * 150}ms`}>
              <div class="card p-6 bg-white dark:bg-gray-800">
                <ChangelogItem
                  title={entry.data.title}
                  date={entry.data.date}
                  type={entry.data.type}
                  highlights={entry.data.highlights}
                  version={entry.data.version}
                />
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section with stunning gradient -->
  <section class="relative overflow-hidden">
    <!-- Animated gradient background -->
    <div class="absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 animate-gradient"></div>

    <!-- Pattern overlay -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0); background-size: 40px 40px;"></div>
    </div>

    <!-- Content -->
    <div class="relative container-content section text-center">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-extrabold text-white mb-6">
          Gotowy na Podniesienie Swoich Umiejętności Programistycznych?
        </h2>
        <p class="text-xl md:text-2xl text-white/90 mb-12 leading-relaxed">
          Dołącz do tysięcy programistów uczących się dzięki tutorialom opartym na AI i projektom z prawdziwego świata.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
          <a href="/blog" class="group inline-flex items-center px-8 py-4 bg-white text-[rgb(var(--color-accent-dark))] font-bold text-lg rounded-xl hover:bg-gray-100 transition-all duration-300 shadow-2xl hover:shadow-white/20 hover:scale-105">
            Zacznij Teraz
            <svg class="w-6 h-6 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
          <a href="/changelog" class="inline-flex items-center px-8 py-4 border-2 border-white text-white font-bold text-lg rounded-xl hover:bg-white/10 transition-all duration-300 backdrop-blur-sm">
            Zobacz Nowości
          </a>
        </div>

        <!-- Trust indicators -->
        <div class="mt-12 flex flex-wrap justify-center items-center gap-8 text-white/80">
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="font-semibold">Zawsze Za Darmo</span>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="font-semibold">Bez Rejestracji</span>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="font-semibold">Aktualizacje Co Tydzień</span>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>